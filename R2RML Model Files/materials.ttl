@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix km-dev: <http://isi.edu/integration/karma/dev#> .

_:node18ncroajhx1 a km-dev:R2RMLMapping ;
	km-dev:sourceName "aatMediumTerms.csv" ;
	km-dev:modelPublicationTime "1399517358739"^^xsd:long ;
	km-dev:modelVersion "1.0" ;
	km-dev:hasWorksheetHistory "[{\"tags\":[\"Transformation\"],\"inputParameters\":[{\"name\":\"newColumnName\",\"value\":\"Object URI\",\"type\":\"other\"},{\"name\":\"transformationCode\",\"value\":\"objectID = getValue(\\\"objectID\\\")\\nif int(objectID) > 0:\\n    return \\\"http://collection.britishart.yale.edu/id/\\\" + objectID\\nreturn \\\"\\\"\",\"type\":\"other\"},{\"name\":\"worksheetId\",\"value\":\"W\",\"type\":\"worksheetId\"},{\"name\":\"hNodeId\",\"value\":[{\"columnName\":\"objectID\"}],\"type\":\"hNodeId\"},{\"name\":\"errorDefaultValue\",\"value\":\"\",\"type\":\"other\"}],\"commandName\":\"SubmitPythonTransformationCommand\"},{\"tags\":[\"Transformation\"],\"inputParameters\":[{\"name\":\"newColumnName\",\"value\":\"Material URI\",\"type\":\"other\"},{\"name\":\"transformationCode\",\"value\":\"\\ndef zeroStr(str, num):\\n    if num > 0:\\n        return zeroStr(\\\"0\\\" + str, num - 1)\\n    return str\\n    \\n# pads an AAT code\\ndef padAATCode(code):\\n    AATCodeLen = 9\\n    codeLen = len(code)\\n    if codeLen == AATCodeLen:\\n        return code\\n    # subtract 1 because the first digit is always three\\n    numZeroes = AATCodeLen - codeLen - 1\\n    return \\\"3\\\" + zeroStr(\\\"\\\", numZeroes) + code\\n\\nimport re\\n\\n# replace all special characters with an underscore\\ndef urify(str):\\n  str = re.sub(r'[^!#$&amp;*+\\\\--:=\\\\?-\\\\[\\\\]_a-z~]+', '_', str.lower())\\n  # eliminate trailing underscores\\n  if str[len(str) - 1] == \\\"_\\\":\\n    str = str[:len(str) - 1]\\n  return str\\n\\nsource = getValue(\\\"UCTS\\\")\\nuri = \\\"\\\"\\nif int(getValue(\\\"objectID\\\")) > 0:\\n    if re.search(source, \\\"AAT\\\", re.IGNORECASE):\\n        uri = \\\"http://vocab.getty.edu/aat/\\\" + padAATCode(getValue(\\\"SourceTermID\\\"))\\n\\n    elif re.search(getValue(\\\"colThesxrefType\\\"), \\\"(support)|(medium)\\\", re.IGNORECASE): \\n        uri = \\\"http://collection.britishart.yale.edu/id/thesauri/material/\\\" + urify(getValue(\\\"term\\\"))\\n\\n    elif re.search(getValue(\\\"colThesxrefType\\\"), \\\"(technique)\\\", re.IGNORECASE): \\n        uri = \\\"http://collection.britishart.yale.edu/id/thesauri/technique/\\\" + urify(getValue(\\\"term\\\"))\\n\\n    else: \\n        uri = \\\"\\\"\\n\\nreturn uri\\n\\nreturn uri\",\"type\":\"other\"},{\"name\":\"worksheetId\",\"value\":\"W\",\"type\":\"worksheetId\"},{\"name\":\"hNodeId\",\"value\":[{\"columnName\":\"Object URI\"}],\"type\":\"hNodeId\"},{\"name\":\"errorDefaultValue\",\"value\":\"\",\"type\":\"other\"}],\"commandName\":\"SubmitPythonTransformationCommand\"},{\"tags\":[\"Transformation\"],\"inputParameters\":[{\"name\":\"newColumnName\",\"value\":\"Material inScheme\",\"type\":\"other\"},{\"name\":\"transformationCode\",\"value\":\"import re\\n\\nsource = getValue(\\\"UCTS\\\")\\nuri = \\\"\\\"\\nif int(getValue(\\\"objectID\\\")) > 0:\\n    if re.search(source, \\\"AAT\\\", re.IGNORECASE):\\n        uri = \\\"http://vocab.getty.edu/aat/300000000/\\\"\\n    else:\\n        uri = \\\"http://collection.britishart.yale.edu/id/thesauri/material/\\\"\\n\\nreturn uri\",\"type\":\"other\"},{\"name\":\"worksheetId\",\"value\":\"W\",\"type\":\"worksheetId\"},{\"name\":\"hNodeId\",\"value\":[{\"columnName\":\"Material URI\"}],\"type\":\"hNodeId\"},{\"name\":\"errorDefaultValue\",\"value\":\"\",\"type\":\"other\"}],\"commandName\":\"SubmitPythonTransformationCommand\"}]" .